name: validate-vendor
on:
  workflow_call:
    inputs:
      ref:
        description: 'Git ref to checkout'
        required: false
        type: string

jobs:
  vendor:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - name: Checkout repository
        # Commit pin (matches v4 release) to prevent tag drift and ensure reproducibility
        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a96968112b
        with:
          ref: ${{ inputs.ref || github.sha }}
      - name: Check vendor snapshot
        run: bash scripts/check-vendor.sh
      - name: Hint when script missing
        if: failure()
        run: echo "scripts/check-vendor.sh failed or is missing. Ensure vendor snapshot policy is aligned."
